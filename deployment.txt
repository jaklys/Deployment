<script>
document.addEventListener('DOMContentLoaded', function () {
  // Přidání posluchače události na každý řádek v tabulce
  var tableRows = document.querySelectorAll('#myTable tr');
  
  tableRows.forEach(function(row) {
    // Přidání posluchače pro dvojklik na řádek
    row.addEventListener('dblclick', function() {
      toggleCheckboxAndHighlight(row);
    });

    // Přidání posluchače pro klik na checkbox v rámci řádku
    var checkbox = row.querySelector('input[type="checkbox"]');
    if (checkbox) {
      checkbox.addEventListener('click', function(e) {
        // Zabráníme vyvolání události dvojkliku na řádek
        e.stopPropagation();
        // Přepnutí zvýraznění bez změny stavu checkboxu, protože kliknutí na checkbox to udělá samo
        toggleHighlight(row, checkbox.checked);
      });
    }
  });

  function toggleCheckboxAndHighlight(row) {
    var checkbox = row.querySelector('input[type="checkbox"]');
    if (checkbox) {
      checkbox.checked = !checkbox.checked; // Přepne stav checkboxu
      toggleHighlight(row, checkbox.checked); // Přepne zvýraznění
    }
  }

  function toggleHighlight(row, isChecked) {
    if (isChecked) {
      row.classList.add('has-background-primary');
    } else {
      row.classList.remove('has-background-primary');
    }
  }
});
</script>