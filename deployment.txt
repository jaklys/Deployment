document.addEventListener('DOMContentLoaded', function() {
    let isDragging = false;
    let draggingTimeout; // Proměnná pro uchování časovače
    let table = document.getElementById('myTable');

    table.addEventListener('mousedown', (e) => {
        let row = e.target.closest('tr');
        if (row) {
            // Inicializace časovače
            draggingTimeout = setTimeout(function() {
                isDragging = true; // Aktivace táhnutí po uplynutí zpoždění
                toggleCheckboxAndHighlight(row, true); // Zaškrtnutí a zvýraznění řádku
            }, 1000); // 1 sekunda zpoždění
            e.preventDefault();
        }
    });

    table.addEventListener('mouseover', (e) => {
        if (isDragging) {
            let row = e.target.closest('tr');
            if (row) {
                toggleCheckboxAndHighlight(row, true);
            }
        }
    });

    document.addEventListener('mouseup', () => {
        clearTimeout(draggingTimeout); // Zrušení časovače při uvolnění tlačítka myši
        if (isDragging) {
            isDragging = false; // Deaktivace táhnutí
        }
    });

    function toggleCheckboxAndHighlight(row, isChecked) {
        let checkbox = row.querySelector('input[type="checkbox"]');
        if (checkbox) {
            checkbox.checked = isChecked;
            if (isChecked) {
                row.classList.add('has-background-primary');
            } else {
                row.classList.remove('has-background-primary');
            }
        }
    }
});